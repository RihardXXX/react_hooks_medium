import React, {useEffect} from "react";

import useFetch from 'hooks/useFetch';

import './userProfile.css';
import {NavLink} from "react-router-dom";

const UserProfile = ({match, location}) => {

    const { slug } = match.params;
    const isFavorite = location.pathname.includes('favorites');
    const apiUrl = `/profiles/${slug}`;
    const [{response}, doFetch] = useFetch(apiUrl);

    useEffect(() => {
        doFetch();
    }, [doFetch]);

    if(!response) {
        return null;
    }

    console.log('response: ', response.data.profile);


    const { image, username, bio } = response.data.profile;

    return (
        <div className="container">
            <div className="row">
                <div className="profile">
                    <span className="image">
                        {image}
                    </span>
                    <span className="username">
                        {username}
                    </span>
                    <span className="bio">
                        {bio}
                    </span>
                </div>
            </div>
            <div className="row">
                <div className="posts">
                    <ul className="nav nav-pills outline-active">
                        <li className="nav-item">
                            <NavLink to={`/profiles/${username}`} exact className="nav-link">
                                My posts
                            </NavLink>
                        </li>
                        <li className="nav-item">
                            <NavLink to={`/profiles/${username}/favorites`} className="nav-link">
                                Favorites Posts
                            </NavLink>
                        </li>
                    </ul>
                    User Articles
                </div>
            </div>
        </div>
    )
}

export default UserProfile;
