import React, { useEffect, Fragment } from 'react';
import Feed from 'components/Feed'
import useFetch from 'hooks/useFetch';
import Pagination from 'components/Pagination'

import './index.css'
// https://conduit.productionready.io/api/articles?limit=10&offset=0

const GlobalFeed = () => {
    const [{response, isLoading, errors}, doFetch] = useFetch('/articles?limit=4&offset=0');

    useEffect(() => {
        doFetch()
    }, [])

    console.log(response);
    console.log(errors);

    return (
        <div>
            <div className="myBanner">
                <div className="container">
                    <h1 className="logo-font">conduit</h1>
                    <p>A place to share your knowledge.</p>
                </div>
            </div>
            <div className="container">
                <div className="row">
                    <div className="col-8">
                        { isLoading && <h5>Loaded pages</h5> }
                        { errors && <h5>Pages error (((</h5> }
                        { !isLoading && response && (
                            <Fragment>
                                <Feed articles={response.data.articles} />
                                <Pagination
                                    total={500}
                                    limit={4}
                                    url={'/'}
                                    currentPage={2}
                                />
                            </Fragment>
                            ) }
                    </div>
                    <div className="col-4">
                        popular tags
                    </div>
                </div>
            </div>
        </div>
    )
}

export default  GlobalFeed;
