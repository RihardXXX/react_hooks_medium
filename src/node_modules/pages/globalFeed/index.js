import React, { useEffect } from 'react';
import Feed from 'components/Feed'
import useFetch from 'hooks/useFetch';

import './index.css'
// https://conduit.productionready.io/api/articles?limit=10&offset=0

const GlobalFeed = () => {
    const [{response, isLoading, isError}, doFetch] = useFetch('/articles?limit=10&offset=0');

    useEffect(() => {
        doFetch()
    }, [])

    // console.log(response);

    return (
        <div>
            <div className="myBanner">
                <div className="container">
                    <h1 className="logo-font">conduit</h1>
                    <p>A place to share your knowledge.</p>
                </div>
            </div>
            <div className="container">
                <div className="row">
                    <div className="col-8">
                        { isLoading && <h5>Loaded pages</h5> }
                        { isError && <h5>Pages error (((</h5> }
                        { !isLoading && response && <Feed articles={response.data.articles} /> }
                    </div>
                    <div className="col-4">
                        popular tags
                    </div>
                </div>
            </div>
        </div>
    )
}

export default  GlobalFeed;
