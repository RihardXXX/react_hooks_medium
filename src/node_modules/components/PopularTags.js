import React, { useEffect } from "react";
import useFetch from 'hooks/useFetch';
import Loader from "components/Loader";
import ErrorMessage from "components/ErrorMessage";
import {Link} from "react-router-dom";

import './popularTags.css';

const PopularTags = () => {

    const [{ response, isLoading, errors }, doFetch] = useFetch('/tags');

    useEffect(() => {
        doFetch()
    }, [doFetch]);

    console.log('response: tags', response);

    if(isLoading || !response) {
        return <Loader />
    }

    if(errors) {
        return <ErrorMessage />
    }

    return (
        <div className="sidebar">
            <p>Popular tags</p>
            <div className="tag-list">
                {
                   response.data.tags.map(tag => {
                        return (
                            <Link to={`tag/${tag}`} key={tag} className="tag-default tag-pill">
                                {tag}
                            </Link>
                        )
                    })
                }
            </div>
        </div>
    )
}

export default PopularTags;
